package com.gamesense.client.module.modules.exploits;

import com.gamesense.api.event.events.PacketEvent;
import com.gamesense.api.setting.values.BooleanSetting;
import com.gamesense.client.module.Category;
import com.gamesense.client.module.Module;
import net.minecraft.network.play.client.CPacketEntityAction;
import net.minecraft.network.play.client.CPacketPlayer;
import net.minecraftforge.fml.common.eventhandler.SubscribeEvent;

/**
 * @author aesthetical
 * Hause used to claim the module rights, rofl
 */
@Module.Declaration(name = "AntiHunger", category = Category.Exploits)
public class AntiHunger extends Module {
	BooleanSetting ground = registerBoolean("Ground", true);
	BooleanSetting fallCheck = registerBoolean("FallCheck", true);
	BooleanSetting sprint = registerBoolean("Sprint", false);
	
	@SubscribeEvent
    public void onPacketSend(PacketEvent.Send event) {
        if (mc.world != null) {
            if (PacketEvent.getPacket() instanceof CPacketPlayer) {
                if (ground.getValue()) {
                    if (fallCheck.getValue() && mc.player.fallDistance > 3) {
                        return;
                    }

                    ((CPacketPlayer) PacketEvent.getPacket()).onGround = true;
                }
            } else if (PacketEvent.getPacket() instanceof CPacketEntityAction) {
                CPacketEntityAction packet = (CPacketEntityAction) PacketEvent.getPacket();
                if (packet.getAction() == CPacketEntityAction.Action.START_SPRINTING && sprint.getValue()) {
                    event.cancel();
                }
            }
        }
    }
}
